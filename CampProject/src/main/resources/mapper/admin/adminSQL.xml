<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="admin">
<!-- 동적쿼리 -->
  <select id="selectMemberList" parameterType="map" resultType="member">
  select
  		rownum as rnum,
  		member_no as memberNo,
  		member_name as memberName,
  		member_phone as memberPhone,
  		member_id as memberId,
  		member_pw as memberPw,
  		member_email as memberEmail,
  		member_reg_date as memberRegDate,
  		member_grade as memberGrade
  from (select rownum as rnum,n.*from(select * from member where member_grade = 1 order by 1 desc)n) where rnum between #{start} and #{end}
  	<!-- if test="memPw != null"> 
  	and mem_pw=#{memPw}
  	</if--> 
  </select>  
  
  <select id="selectAllMemberCount" resultType="_int">
  	select count(*)
  	from member where member_grade=1
  </select>
  
  <select id="selectBusinessList" parameterType="map" resultType="camp">
  select
  		rownum as rnum,
  		camp_no as campNo,
  		camp_name as campName,
  		camp_addr as campAddr,
  		member_no as memberNo,
  		camp_show as campShow,
  		camp_type as campType,
  		camp_ph as campPh,
  		camp_period as campPeriod,
  		camp_day as campDay,
  		camp_facility as campFacility,
  		camp_fee_ori_day as campFeeOriDay,
  		camp_fee_ori_end as campFeeOriEnd,
  		camp_fee_peak_day as campFeePeakDay,
  		camp_fee_peak_end as campFeePeakEnd
  from (select rownum as rnum,n.*from(select * from camp order by 1 desc)n) where rnum between #{start} and #{end}  	 
  </select>
  
  <select id="selectAllBusinessCount" resultType="_int">
  	select count(*)
  	from camp
  </select>
  
  <select id="selectReserveList" parameterType="map" resultType="reserve">
  select
  		rownum as rnum,
  		reserve_no as reserveNo,
  		member_no as memberNo,
  		camp_no as campNo,
  		check_in_date as checkInDate,
  		check_out_date as checkOutDate,
  		reserve_status as reserveStatus,
  		reserve_place as reservePlace,
  		reserve_price as reservePrice,
  		reserve_pw as reservePw,
  		car_number as carNumber,
  		reserve_memo as reserveMeno
  from (select rownum as rnum,n.*from(select * from reservation order by 1 desc)n) where rnum between #{start} and #{end}  	 
  </select>
  
  <select id="selectAllReserveCount" resultType="_int">
  	select count(*)
  	from reservation
  </select>
  
  <select id="selectSalesListName" resultType="String">
  	select camp_name
  	from camp where camp_no=#{_parameter}
  </select>
  
  <select id="selectSalesListNum" resultType="_int">
  	select DISTINCT camp_no
  	from reservation
  </select>
  
  <select id="selectMonthSale" parameterType="map" resultType="reserve">
  	select
  		RESERVE_PRICE as reservePrice,
  		reserve_status as reserveStatus
  	from reservation where
  		substr(check_in_date,6,2)=#{month} and
  		substr(check_in_date,1,4)=#{year} and
  		camp_no=#{campNo}
  </select>
  
  <select id="selectReviewListNum" resultType="_int">
  	select DISTINCT camp_no
  	from review
  </select>
  
  <select id="selectReviewPointChart" resultType="_float">
  	select avg(review_point)
  	from review where camp_no=#{_parameter}
  </select>
  
</mapper>
